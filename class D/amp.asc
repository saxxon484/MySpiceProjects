Version 4
SHEET 1 5412 1748
WIRE -256 -416 -272 -416
WIRE -64 -416 -80 -416
WIRE -256 -400 -256 -416
WIRE -64 -400 -64 -416
WIRE -256 -304 -256 -320
WIRE -256 -304 -272 -304
WIRE -64 -304 -64 -320
WIRE -64 -304 -80 -304
WIRE -256 -288 -256 -304
WIRE -64 -288 -64 -304
WIRE -256 -192 -256 -208
WIRE -256 -192 -272 -192
WIRE -64 -192 -64 -208
WIRE -64 -192 -80 -192
WIRE 3088 128 3088 112
WIRE 3424 128 3424 112
WIRE 5136 128 5104 128
WIRE 5264 128 5216 128
WIRE 1696 160 1696 144
WIRE 1040 176 1024 176
WIRE 1168 176 1120 176
WIRE 1184 176 1168 176
WIRE 4192 176 4192 160
WIRE 4592 176 4592 160
WIRE -272 192 -272 176
WIRE 1168 192 1168 176
WIRE 1600 224 1600 208
WIRE 2640 224 2448 224
WIRE 3088 224 3088 208
WIRE 3424 224 3424 208
WIRE 1536 240 1520 240
WIRE 1568 240 1536 240
WIRE 1696 256 1696 240
WIRE 1696 256 1632 256
WIRE 1728 256 1696 256
WIRE 4144 256 4112 256
WIRE 4672 256 4640 256
WIRE 240 272 224 272
WIRE 1168 272 1168 256
WIRE 1552 272 1520 272
WIRE 1568 272 1552 272
WIRE -272 288 -272 272
WIRE 2448 288 2448 224
WIRE 2480 288 2448 288
WIRE 2592 288 2544 288
WIRE 1600 304 1600 288
WIRE 4192 304 4192 272
WIRE 4240 304 4192 304
WIRE 4592 304 4592 272
WIRE 4592 304 4544 304
WIRE 4192 336 4192 304
WIRE 4592 336 4592 304
WIRE 2640 352 2640 224
WIRE 2672 352 2640 352
WIRE 2784 352 2736 352
WIRE 3088 368 3088 352
WIRE 3424 368 3424 352
WIRE 1072 384 1056 384
WIRE 1168 384 1152 384
WIRE 2352 384 2336 384
WIRE 2448 384 2448 288
WIRE 2448 384 2416 384
WIRE 2480 384 2448 384
WIRE 2592 384 2592 288
WIRE 2592 384 2560 384
WIRE 2672 384 2592 384
WIRE 928 400 784 400
WIRE 1696 400 1696 384
WIRE 2336 416 2336 384
WIRE 2336 416 2304 416
WIRE 2352 416 2336 416
WIRE 2592 416 2592 384
WIRE 4144 416 4112 416
WIRE 4672 416 4640 416
WIRE 4192 448 4192 432
WIRE 4592 448 4592 432
WIRE 1600 464 1600 448
WIRE 3088 464 3088 448
WIRE 3424 464 3424 448
WIRE -272 480 -272 464
WIRE 1552 480 1552 272
WIRE 1568 480 1552 480
WIRE 1696 496 1696 480
WIRE 1696 496 1632 496
WIRE 1728 496 1696 496
WIRE 864 512 864 496
WIRE 1536 512 1536 240
WIRE 1568 512 1536 512
WIRE 2592 512 2592 480
WIRE 784 528 784 400
WIRE 832 528 784 528
WIRE 1104 528 1104 512
WIRE 928 544 928 400
WIRE 928 544 896 544
WIRE 960 544 928 544
WIRE 1056 544 1056 384
WIRE 1056 544 1040 544
WIRE 1072 544 1056 544
WIRE 1600 544 1600 528
WIRE 624 560 592 560
WIRE 736 560 704 560
WIRE 832 560 736 560
WIRE 928 560 928 544
WIRE 1168 560 1168 384
WIRE 1168 560 1136 560
WIRE 1184 560 1168 560
WIRE -272 576 -272 560
WIRE 736 576 736 560
WIRE 1072 576 1056 576
WIRE 864 592 864 576
WIRE 1104 608 1104 592
WIRE 2640 608 2448 608
WIRE 928 640 928 624
WIRE 736 672 736 640
WIRE 2448 672 2448 608
WIRE 2480 672 2448 672
WIRE 2592 672 2544 672
WIRE -272 688 -272 672
WIRE 1696 720 1696 704
WIRE 2640 736 2640 608
WIRE 2672 736 2640 736
WIRE 2784 736 2736 736
WIRE 2352 768 2336 768
WIRE 2448 768 2448 672
WIRE 2448 768 2416 768
WIRE 2480 768 2448 768
WIRE 2592 768 2592 672
WIRE 2592 768 2560 768
WIRE 2672 768 2592 768
WIRE -272 784 -272 768
WIRE 1600 784 1600 768
WIRE 1536 800 1520 800
WIRE 1568 800 1536 800
WIRE 2336 800 2336 768
WIRE 2336 800 2304 800
WIRE 2352 800 2336 800
WIRE 2592 800 2592 768
WIRE 1696 816 1696 800
WIRE 1696 816 1632 816
WIRE 1728 816 1696 816
WIRE 1552 832 1520 832
WIRE 1568 832 1552 832
WIRE 1600 864 1600 848
WIRE 2592 896 2592 864
WIRE 1696 992 1696 976
WIRE 2640 1008 2448 1008
WIRE 1600 1056 1600 1040
WIRE 1552 1072 1552 832
WIRE 1568 1072 1552 1072
WIRE 2448 1072 2448 1008
WIRE 2480 1072 2448 1072
WIRE 2592 1072 2544 1072
WIRE 1696 1088 1696 1072
WIRE 1696 1088 1632 1088
WIRE 1728 1088 1696 1088
WIRE 1536 1104 1536 800
WIRE 1568 1104 1536 1104
WIRE 1600 1136 1600 1120
WIRE 2640 1136 2640 1008
WIRE 2672 1136 2640 1136
WIRE 2784 1136 2736 1136
WIRE 2352 1168 2336 1168
WIRE 2448 1168 2448 1072
WIRE 2448 1168 2416 1168
WIRE 2480 1168 2448 1168
WIRE 2592 1168 2592 1072
WIRE 2592 1168 2560 1168
WIRE 2672 1168 2592 1168
WIRE 2336 1200 2336 1168
WIRE 2336 1200 2304 1200
WIRE 2352 1200 2336 1200
WIRE 2592 1200 2592 1168
WIRE 2592 1296 2592 1264
WIRE 2640 1392 2448 1392
WIRE 2448 1456 2448 1392
WIRE 2480 1456 2448 1456
WIRE 2592 1456 2544 1456
WIRE 2640 1520 2640 1392
WIRE 2672 1520 2640 1520
WIRE 2784 1520 2736 1520
WIRE 2352 1552 2336 1552
WIRE 2448 1552 2448 1456
WIRE 2448 1552 2416 1552
WIRE 2480 1552 2448 1552
WIRE 2592 1552 2592 1456
WIRE 2592 1552 2560 1552
WIRE 2672 1552 2592 1552
WIRE 2336 1584 2336 1552
WIRE 2336 1584 2304 1584
WIRE 2352 1584 2336 1584
WIRE 2592 1584 2592 1552
WIRE 2592 1680 2592 1648
FLAG -80 -304 0
FLAG -80 -416 +VDD
FLAG -80 -192 -VDD
FLAG -272 784 0
FLAG -272 672 in
FLAG 1168 272 0
FLAG 1024 176 in
FLAG 1184 176 +in
FLAG 736 672 0
FLAG 592 560 in
FLAG 1600 304 0
FLAG 1520 272 +in
FLAG 1056 576 0
FLAG 1104 512 +VDD
FLAG 1104 608 -VDD
FLAG 1600 864 0
FLAG -272 176 sawtooth
FLAG -272 288 0
FLAG 1520 240 comp
FLAG 1520 800 comp
FLAG 864 496 +VDD
FLAG 864 592 -VDD
FLAG 928 640 0
FLAG 4192 160 +VDD
FLAG -272 464 triangle
FLAG -272 576 0
FLAG 240 272 comp
FLAG 224 272 triangle
FLAG 4592 160 +VDD
FLAG 4240 304 vac+
FLAG 4544 304 vac-
FLAG 4112 256 q1
FLAG 4112 416 q1p
FLAG 4672 256 q2
FLAG 4672 416 q2p
FLAG 1728 256 x1
FLAG 1728 816 x2
FLAG 1600 544 0
FLAG 1728 496 x1p
FLAG 1600 1136 0
FLAG 1728 1088 x2p
FLAG 2304 416 x1
FLAG 2592 512 0
FLAG -272 -304 0
FLAG -272 -416 +5V
FLAG -272 -192 -5V
FLAG 1600 208 +5V
FLAG 1600 448 +5V
FLAG 1600 768 +5V
FLAG 1600 1040 +5V
FLAG 2592 896 0
FLAG 2784 352 x1_d
FLAG 2784 736 x1p_d
FLAG 3088 112 q1
FLAG 3424 112 q1p
FLAG 3088 352 q2
FLAG 3424 464 0
FLAG 3424 352 q2p
FLAG 1696 144 +5V
FLAG 1696 384 +5V
FLAG 1696 704 +5V
FLAG 1696 976 +5V
FLAG 2304 800 x1p
FLAG 2592 1296 0
FLAG 2592 1680 0
FLAG 2784 1136 x2_d
FLAG 2784 1520 x2p_d
FLAG 2304 1200 x2
FLAG 2304 1584 x2p
FLAG 3088 224 vac+
FLAG 4192 448 0
FLAG 4592 448 0
FLAG 3424 224 0
FLAG 3088 464 vac-
FLAG 5104 128 vac+
FLAG 5264 128 vac-
FLAG 1184 560 -in
FLAG 1520 832 -in
SYMBOL OpAmps\\opamp2 1600 192 R0
SYMATTR InstName U1
SYMATTR Value LM339
SYMBOL voltage -64 -416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -64 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL voltage -272 672 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(0 0.8 2k)
SYMBOL diode 1184 256 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N914
SYMBOL res 1136 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL diode 720 576 R0
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL res 720 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 1056 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 47k
SYMBOL OpAmps\\opamp2 1600 752 R0
SYMATTR InstName U3
SYMATTR Value LM339
SYMBOL res 1680 144 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1680 704 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL voltage -272 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 1 0 {T} 1p {1p} {T})
SYMBOL OpAmps\\UniversalOpAmp2 864 544 R0
SYMATTR InstName U2
SYMBOL OpAmps\\UniversalOpAmp2 1104 560 R0
SYMATTR InstName U4
SYMBOL cap 912 560 R0
SYMATTR InstName C2
SYMATTR Value 1pF
SYMBOL res 1168 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 47k
SYMBOL nmos 4144 176 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL voltage -272 464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 1 0 {T/2} {T/2} {1p} {T})
SYMBOL nmos 4144 336 R0
SYMATTR InstName M2
SYMATTR Value IRF530
SYMBOL nmos 4640 176 M0
SYMATTR InstName M3
SYMATTR Value IRF530
SYMBOL nmos 4640 336 M0
SYMATTR InstName M4
SYMATTR Value IRF530
SYMBOL OpAmps\\opamp2 1600 432 R0
SYMATTR InstName U5
SYMATTR Value LM339
SYMBOL res 1680 384 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL OpAmps\\opamp2 1600 1024 R0
SYMATTR InstName U6
SYMATTR Value LM339
SYMBOL res 1680 976 R0
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL diode 2544 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL cap 2576 416 R0
SYMATTR InstName C1
SYMATTR Value {C_dt}
SYMBOL voltage -256 -416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL voltage -256 -304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value 5
SYMBOL diode 2544 656 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N914
SYMBOL bv 3088 112 R0
SYMATTR InstName B1
SYMATTR Value V=IF(V(x1_d), 12, 0)
SYMBOL bv 3424 112 R0
SYMATTR InstName B2
SYMATTR Value V=IF(V(x1p_d), 12, 0)
SYMBOL bv 3088 352 R0
SYMATTR InstName B3
SYMATTR Value V=IF(V(x2_d), 12, 0)
SYMBOL bv 3424 352 R0
SYMATTR InstName B4
SYMATTR Value V=IF(V(x2p_d), 12, 0)
SYMBOL Digital\\and 2704 304 R0
SYMATTR InstName A4
SYMBOL Digital\\and 2704 688 R0
SYMATTR InstName A1
SYMBOL Digital\\and 2384 336 R0
SYMATTR InstName A5
SYMBOL Digital\\and 2384 720 R0
SYMATTR InstName A6
SYMBOL diode 2544 1056 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value 1N914
SYMBOL diode 2544 1440 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D6
SYMATTR Value 1N914
SYMBOL Digital\\and 2704 1088 R0
SYMATTR InstName A2
SYMBOL Digital\\and 2704 1472 R0
SYMATTR InstName A3
SYMBOL Digital\\and 2384 1120 R0
SYMATTR InstName A7
SYMBOL Digital\\and 2384 1504 R0
SYMATTR InstName A8
SYMBOL res 2576 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {R_dt}
SYMBOL res 2576 752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R_dt}
SYMBOL cap 2576 800 R0
SYMATTR InstName C3
SYMATTR Value {C_dt}
SYMBOL res 2576 1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R_dt}
SYMBOL cap 2576 1200 R0
SYMATTR InstName C4
SYMATTR Value {C_dt}
SYMBOL res 2576 1536 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R_dt}
SYMBOL cap 2576 1584 R0
SYMATTR InstName C5
SYMATTR Value {C_dt}
SYMBOL res 5232 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10
TEXT -400 -568 Left 2 !.param f 100k\n.param T 1/f\n.lib LM358.sub\n.lib LM339.sub
TEXT 412 -500 Left 2 !.tran 0 10m 0
TEXT -168 -568 Left 2 !.options gmin=1e-10\n.options abstol=1e-10\n.options reltol=0.001\n.options cshunt=1e-15
TEXT 2264 104 Left 2 !.param R_dt 12k\n.param C_dt 10pF
TEXT 624 16 Left 4 ;Signal Clipping
TEXT -464 -624 Left 4 ;Parameters and Voltage Supplies
TEXT 1416 16 Left 4 ;PWM generation
TEXT 2280 16 Left 4 ;Deadtime
TEXT 3088 16 Left 4 ;Gate Driver
TEXT 4072 16 Left 4 ;Double H-Bridge
TEXT 5080 24 Left 4 ;Load
TEXT -376 8 Left 4 ;Input Signal and Triangle/Sawtooth
